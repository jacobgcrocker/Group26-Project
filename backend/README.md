# Wat2Eat Backend

## Food Recipe Dataset

I have looked on the internet some datasets of food recipes, and found some decent ones that were generated by scraping the Food.com website.

1. **Food.com Recipes and Interactions** by Shuyang Li and others: https://www.kaggle.com/datasets/shuyangli94/food-com-recipes-and-user-interactions
2. **Food.com Recipes with Ingredients and Tags** by Alexander Wei: https://www.kaggle.com/datasets/realalexanderwei/food-com-recipes-with-ingredients-and-tags/

|                                                  | Set 1                   | Set 2                 |
| ------------------------------------------------ | ----------------------- | --------------------- |
| Recipe name                                      | Yes                     | Yes                   |
| Recipe ID                                        | Yes                     | Yes                   |
| Exact time to prep                               | Yes                     |                       |
| Contributor ID                                   | Yes                     |                       |
| Submit date                                      | Yes                     |                       |
| Tags (time category, culture, events, etc.)      | Yes                     | Yes                   |
| Nutrition breakdown (calories, fat, sugar, etc.) | Yes                     |                       |
| Number of steps                                  | Yes                     | No, but trivial to do |
| Cooking directions                               | Yes                     | Yes                   |
| Recipe description                               | Yes                     | Yes                   |
| General ingredients                              | Yes                     | Yes                   |
| Quantified ingredients                           |                         | Yes                   |
| Number of ingredients                            | Yes                     | No, but trivial to do |
| Number of servings                               |                         | Yes                   |
| Serving size                                     |                         | Yes                   |
| Reviews (User Id, Recipe ID, Date, Rating, Des)  | Yes, but not so trivial |

**Set 1** contains more details and even user interactions (reviews). It has around 260k recipes and 1.3m reviews. The date of the data seems to be from 1999-2018, a lot of entries are from before 2010.

**Set 2** contains fewer details, no reviews, but has some valuable information like quantified ingredients, number of servings, and serving size. The dataset was generated in 2023, and it contains around 500k recipes.

A recipe entry from **Set 1** looks like this:

```bash
{
  "name": "deep fried dessert thingys",
  "id": 107699,
  "minutes": 20,
  "contributor_id": 158966,
  "submitted": "2005-01-05",
  "tags": "['30-minutes-or-less', 'time-to-make', 'course', 'preparation', 'occasion', 'low-protein', 'desserts', 'deep-fry', 'stove-top', 'dietary', 'high-calcium', 'high-in-something', 'low-in-something', 'taste-mood', 'sweet', 'equipment', 'technique']",
  "nutrition": "[1663.3, 221.0, 168.0, 66.0, 19.0, 158.0, 29.0]",
  "n_steps": 20,
  "steps": "['in a large bowl , mix flour , granulated sugar , baking powder and salt', 'make a well in the center of the flour mixture , and pour in milk , vanilla , egg and 2 tablespoons oil', 'mix until smooth', 'heat remaining vegetable oil to 400 degrees in a small deep fryer', 'oil is hot enough when it starts to ripple', 'be careful not to overheat', 'butter one side of each bread slice', 'sprinkle the brown sugar and cinnamon evenly onto the buttered side of the bread slices', 'make sandwiches by placing the slices of bread together with the brown sugar on the inside', 'cut the sandwiches into quarters', 'now is a good time to test the oil by dropping in a very small amount of batter', 'batter should sizzle and brown in about 20 seconds', 'oil needs to be hot enough to melt the brown sugar inside the sandwiches but not so hot that it scorches the batter', 'dip the sandwiches into the batter mixture', 'using deep fryer tongs , carefully place the battered sandwiches into the heated oil', 'be cautious when deep frying', 'try to avoid burns from splattering hot oil', 'remove sandwiches from the oil when they are golden brown', 'set aside to cool for a couple of minutes', 'sprinkle with powdered sugar and serve']",
  "description": "my mother used to make this for us as a special treat. i don't know where she got this recipe or what it is called (hence the title). my husband loves this and encouraged me to submit it. this recipe is full of sugar and oil and is as unhealthy as a desert can be but very yummy.",
  "ingredients": "['all-purpose flour', 'granulated sugar', 'baking powder', 'salt', 'vanilla extract', 'egg', 'milk', 'vegetable oil', 'bread', 'brown sugar', 'ground cinnamon', 'butter', 'powdered sugar']",
  "n_ingredients": 13
}
```

A recipe entry from **Set 2** looks like this:

```bash
{
  "id": 71247,
  "name": "Cherry Streusel Cobbler",
  "description": "I haven't made this in years, so I'm just guessing on prep time.  I'm putting in the shortest bake time, so you might have to adjust.",
  "ingredients": ["cherry pie filling", "condensed milk", "melted margarine", "cinnamon", "nutmeg", "light brown sugar", "flour", "margarine", "chopped nuts", "oats", "butter - flavored cooking spray"],
  "ingredients_raw": ["2 (21   ounce) cans   cherry pie filling", "2       eggs", "1 (14   ounce) can   sweetened condensed milk (not evaporated)", "1/4  cup   melted margarine", "1/2  teaspoon    cinnamon", "1/4  teaspoon    nutmeg", "1/2  cup   firmly packed light brown sugar", "1/2  cup    self-rising flour", "1/4  cup    margarine", "1/2  cup   chopped nuts (chef's choice)", "1/2  cup    quick-cooking oats", "  butter-flavored cooking spray"],
  "steps": ["Preheat oven to 375Â°F.", "Spread cherry pie filling in a 8 x 8-inch square pan that hasbeen sprayed.", "In a medium-size bowl, beat eggs.", "Add milk, melted margarine, cinnamon, and nutmeg; mix well.", "Pour over cherry pie filling.", "In another medium size bowl, combine sugar and flour.", "Add margarine; with fork stir until crumbly.", "Add nuts and oats.", "Sprinkle over cobbler mixture.", "Bake 50 to 55 minutes or until set.", "Cool.", "Serve warm with ice cream or whipped topping.", "Refrigerate leftovers."],
  "servings": 6,
  "serving_size": "1 (347 g)",
  "tags": ["60-minutes-or-less", "time-to-make", "course", "main-ingredient", "cuisine", "preparation", "north-american", "cobblers-and-crisps", "desserts", "fruit", "oven", "pitted-fruit", "cherries", "equipment"]
}
```

## Rest API with Node.js routes and controllers

Read more: https://lo-victoria.com/build-a-rest-api-with-nodejs-routes-and-controllers

## Load testing

Some tools for load testing: https://nodeteam.medium.com/load-testing-tools-for-node-js-developers-98291ed75a4b

## Search engine

NPM package for Elasticsearch Node.js client: https://www.npmjs.com/package/@elastic/elasticsearch

Using a search engine can be beneficial for performance at the cost of data duplication.
